module speed (
    input clk,
    input [15:0] sq,
    input dir,
    output A, 
    output B
    //todo vypadek otacek
);

reg r_A = 0;
reg r_B = 0;


reg [15:0] sq_cnt = 0;
reg [15:0] sq_half = 0;


always @(posedge clk) begin
    
    if(sq_cnt < sq) begin
        sq_cnt <= sq_cnt + 1;
        if(sq_cnt == sq_half) begin
            r_A <= !r_A;
        end

    end else begin
        sq_cnt <= 0;
        r_B <= !r_B;
    end
    
    sq_half <= sq >> 1;
end


assign A = r_A;
assign B = r_B;


endmodule